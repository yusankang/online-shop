"use strict";(self["webpackChunkonline_shop"]=self["webpackChunkonline_shop"]||[]).push([[433],{4677:function(e,t,s){var r=s(9876),a=s(6154),o=s(6294);const c=(0,o.Z)();t["Z"]=(0,r.Q_)("cartStore",{state:()=>({cart:{},isUseCoupon:!1,couponPercent:100,couponCode:"",shippingFee:100,message:"",couponMessage:"",itemId:""}),actions:{getCart(){const e="https://vue3-course-api.hexschool.io/api/yusan-api/cart";c.isLoading=!0,a.Z.get(e).then((e=>{c.isLoading=!1,this.cart=e.data.data,this.checkCouponCode(),localStorage.setItem("cart",JSON.stringify(this.cart))})).catch((e=>{throw new Error(e)}))},checkQty(e,t){let s=e.qty;this.message="",this.itemId="","add"===t&&s>=1&&s<20?(s+=1,this.updateCart(e,s)):"subtract"===t&&s>1&&s<=20?(s-=1,this.updateCart(e,s)):"add"===t&&20===s?(this.itemId=e.id,this.message="最多數量限20"):"subtract"===t&&1===s&&(this.itemId=e.id,this.message="最少數量限1")},updateCart(e,t){const s=`https://vue3-course-api.hexschool.io/api/yusan-api/cart/${e.id}`;c.isLoading=!0,c.cartLoadingItem=e.id;const r={product_id:e.product.id,qty:t};a.Z.put(s,{data:r}).then((()=>{c.isLoading=!1,c.cartLoadingItem="",this.getCart()})).catch((e=>{throw new Error(e.data.message)}))},addCart(e,t){const s="https://vue3-course-api.hexschool.io/api/yusan-api/cart/";c.cartLoadingItem=e;const r={product_id:e,qty:1};r.qty=t,a.Z.post(s,{data:r}).then((()=>{c.cartLoadingItem="",c.pushMessage({title:"加入購物車"}),this.isUseCoupon&&this.addCouponCode(this.couponCode),this.getCart()})).catch((e=>{throw new Error(e.data.message)}))},deleteItem(e){const t=`https://vue3-course-api.hexschool.io/api/yusan-api/cart/${e.id}`;c.isLoading=!0,a.Z["delete"](t).then((e=>{const{message:t}=e.data;c.isLoading=!1,e.data.success?(c.pushMessage({title:"刪除品項"}),this.getCart()):e.data.success||c.pushMessage({title:t,style:"danger"})})).catch((e=>{throw new Error(e)}))},deleteCart(){const e="https://vue3-course-api.hexschool.io/api/yusan-api/carts";c.isLoading=!0,this.message="",a.Z["delete"](e).then((e=>{const{message:t}=e.data;c.isLoading=!1,e.data.success?(c.pushMessage({title:`購物車${t}`}),this.getCart()):e.data.success||c.pushMessage({title:t,style:"danger"})})).catch((e=>{throw new Error(e)}))},addCouponCode(e){if(""===e)this.couponMessage="請輸入優惠碼";else{const t="https://vue3-course-api.hexschool.io/api/yusan-api/coupon",s={code:e};c.isLoading=!0,a.Z.post(t,{data:s}).then((e=>{c.isLoading=!1,e.data.success?(this.CouponMessage="",this.getCart()):e.data.success||(this.couponMessage=e.data.message)})).catch((e=>{throw new Error(e)}))}},clearMessage(){this.couponMessage=""},checkCouponCode(){this.cart.carts[0]?this.cart.carts[0].coupon?(this.isUseCoupon=!0,this.couponCode=this.cart.carts[0].coupon.code,this.couponPercent=this.cart.carts[0].coupon.percent):this.cart.carts[0].coupon||(this.isUseCoupon=!1,this.couponCode="",this.couponPercent=100):this.cart.carts[0]||(this.isUseCoupon=!1,this.couponCode="",this.couponPercent=100)}}})},646:function(e,t,s){s(7658);var r=s(9876),a=s(6154),o=s(6294);const c=(0,o.Z)();t["Z"]=(0,r.Q_)("orderStore",{state:()=>({orders:[],orderIsPaid:!1,orderId:"",order:{user:{}},shippingFee:100,isUseCoupon:!1,couponCode:"",couponPercent:100,subTotal:0,creditNumError:!1,cvvNumError:!1,accNumError:!1,searchMessage:!1}),actions:{getOrder(e){this.orderId=e;const t=`https://vue3-course-api.hexschool.io/api/yusan-api/order/${e}`;c.isLoading=!0,a.Z.get(t).then((e=>{c.isLoading=!1,e.data.success&&null!==e.data.order?(this.order=e.data.order,this.checkCouponCode(),this.calcSubtotal()):null===e.data.order&&(this.searchMessage=!0)})).catch((e=>{throw new Error(e)}))},checkCouponCode(){const e=this.order.products[Object.keys(this.order.products)[0]];e.coupon?(this.isUseCoupon=!0,this.couponCode=e.coupon.code,this.couponPercent=e.coupon.percent):e.coupon||(this.isUseCoupon=!1,this.couponCode="",this.couponPercent=100)},calcSubtotal(){let e=0;Object.keys(this.order.products).forEach((t=>{e+=this.order.products[t].total})),this.subTotal=e},payOrder(){const e=`https://vue3-course-api.hexschool.io/api/yusan-api/pay/${this.orderId}`;c.isLoading=!0,a.Z.post(e).then((e=>{c.isLoading=!1;const{message:t}=e.data;e.data.success?(c.pushMessage({title:t}),this.orderIsPaid=!0,this.router.push({name:"orderComplete"})):e.data.success||c.pushMessage({title:t,style:"danger"})})).catch((e=>{throw new Error(e)}))},checkCreditNum(e){16!==e&&e>=1&&(this.creditNumError=!0)},checkCvvNum(e){e<3&&e>=1&&(this.cvvNumError=!0)},checkAccNum(e){e<5&&e>=1&&(this.accNumError=!0)},clearErrorMessage(){this.creditNumError=!1,this.cvvNumError=!1,this.accNumError=!1},clearSearchMessage(){this.searchMessage=!1}}})},7012:function(e,t,s){s(7658);var r=s(9876),a=s(6154),o=s(6294);const c=(0,o.Z)();t["Z"]=(0,r.Q_)("productsStore",{state:()=>({allProducts:[],filteredProducts:[],displayProducts:[],product:{},paginationLimit:12,category:"",item:{}}),actions:{async getProducts(){const e="https://vue3-course-api.hexschool.io/api/yusan-api/products/all";c.isLoading=!0;try{const t=await a.Z.get(e);c.isLoading=!1,this.allProducts=t.data.products,this.filterCategory()}catch(t){throw new Error(t)}},setCategory(e){localStorage.setItem("currentCategory",JSON.stringify(e))},filterCategory(){this.category=JSON.parse(localStorage.getItem("currentCategory")),"all"!==this.category&&"sale"!==this.category?this.filteredProducts=this.allProducts.filter((e=>e.category===this.category)):"sale"===this.category?this.filteredProducts=this.allProducts.filter((e=>e.origin_price>e.price)):this.filteredProducts=this.allProducts,this.setCurrentPage(1)},setCurrentPage(e){this.displayProducts=[];const t=(e-1)*this.paginationLimit,s=e*this.paginationLimit;this.filteredProducts.forEach(((e,r)=>{r>=t&&r<s&&this.displayProducts.push(e)}))},async getProduct(e){const t=`https://vue3-course-api.hexschool.io/api/yusan-api/product/${e}`;c.isLoading=!0;try{const e=await a.Z.get(t);c.isLoading=!1,this.product=e.data.product}catch(s){throw new Error(s)}},scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}}})},6294:function(e,t,s){s(7658);var r=s(9876);t["Z"]=(0,r.Q_)("statusStore",{state:()=>({isLoading:!1,cartLoadingItem:"",messages:[]}),actions:{pushMessage(e){const{title:t,content:s,style:r="success"}=e;this.messages.push({title:t,content:s,style:r})}}})},1629:function(e,t,s){s.d(t,{Z:function(){return u}});var r=s(6252),a=s(3577);const o={class:"progress-wrapper d-flex justify-content-between my-5"},c={class:"progress-counter"};function l(e,t,s,l,i,n){return(0,r.wg)(),(0,r.iD)("div",o,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(4,(e=>(0,r._)("div",{class:(0,a.C_)(["progress-item",{completed:e<=s.progressBar}]),key:e},[(0,r._)("div",c,(0,a.zw)(e),1)],2))),64))])}var i={props:{progressBar:{type:Number,required:!0,detault:1}}},n=s(3744);const d=(0,n.Z)(i,[["render",l]]);var u=d},3433:function(e,t,s){s.r(t),s.d(t,{default:function(){return Ke}});var r=s(6252),a=s(9963),o=s(3577);const c={class:"container pt-5"},l=(0,r._)("h3",{class:"text-white text-center pt-5 permanent-marker"},"Your Order",-1),i={class:"row d-flex flex-md-row-reverse"},n={class:"col-md-5 mb-3"},d={class:"card border-0"},u={class:"card-body border-0"},p=(0,r._)("h5",{class:"text-center mb-3"},"訂單明細",-1),h={class:"table table-sm align-middle"},m={class:"table-group-divider"},g=["src"],_={class:"w-100"},v={class:"w-100 d-flex align-items-center justify-content-between"},y={class:"w-100"},C=(0,r._)("th",null,"小計",-1),b={class:"text-end"},f={key:0},w={class:"text-success"},k={class:"text-success text-end"},N={key:1},x=(0,r._)("th",{class:"text-success"},"折扣價",-1),I={class:"text-success text-end"},P={key:2},M=(0,r._)("th",null,"運費",-1),E={class:"text-end"},L={key:3},Z=(0,r._)("th",null,"運費",-1),V=(0,r._)("td",{class:"text-end"},"已達到免運金額",-1),D=[Z,V],q={class:"table-group-divider"},z=(0,r._)("th",null,"總計",-1),$={key:0,class:"text-end"},S={key:1,class:"text-end"},T={class:"col-md-7"},A={class:"card border-0 mb-3"},O={class:"card-body border-0"},U=(0,r._)("h5",{class:"text-center mb-3"},"收件人資料",-1),Y={class:"table"},W=(0,r._)("p",null,[(0,r._)("strong",null,"訂單號碼")],-1),F={class:"mb-2"},B=(0,r._)("p",null,[(0,r._)("strong",null,"Email")],-1),j={class:"mb-2"},H=(0,r._)("p",null,[(0,r._)("strong",null,"姓名")],-1),Q={class:"mb-2"},K=(0,r._)("p",null,[(0,r._)("strong",null,"收件人電話")],-1),J={class:"mb-2"},G=(0,r._)("p",null,[(0,r._)("strong",null,"收件人地址")],-1),R={class:"mb-2"},X=(0,r._)("p",null,[(0,r._)("strong",null,"付款狀態")],-1),ee={key:0,class:"text-danger mb-2"},te={key:1,class:"text-success mb-2"},se={key:0,class:"card border-0 mb-3"},re={class:"card-body"};function ae(e,t,s,Z,V,ae){const oe=(0,r.up)("LoadingOverlay"),ce=(0,r.up)("CartProgressBar"),le=(0,r.up)("Payment");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(oe,{active:e.isLoading},null,8,["active"]),(0,r._)("div",c,[l,(0,r.Wm)(ce,{"progress-bar":V.progressBar},null,8,["progress-bar"]),(0,r._)("form",{onSubmit:t[0]||(t[0]=(0,a.iM)(((...t)=>e.payOrder&&e.payOrder(...t)),["prevent"]))},[(0,r._)("div",i,[(0,r._)("div",n,[(0,r._)("div",d,[(0,r._)("div",u,[p,(0,r._)("table",h,[(0,r._)("tbody",m,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.order.products,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id},[(0,r._)("td",null,[(0,r._)("img",{src:t.product.imageUrl,alt:"product image",class:"img-fluid",style:{"max-width":"80px"}},null,8,g)]),(0,r._)("td",_,[(0,r._)("h5",null,(0,o.zw)(t.product.title),1),(0,r._)("div",v,[(0,r._)("span",null,"單價 $"+(0,o.zw)(e.$filters.currency(t.product.price)),1),(0,r._)("span",null,(0,o.zw)(t.qty)+"/ "+(0,o.zw)(t.product.unit),1),(0,r._)("strong",null,"$"+(0,o.zw)(e.$filters.currency(t.total)),1)])])])))),128))])]),(0,r._)("table",y,[(0,r._)("tbody",null,[(0,r._)("tr",null,[C,(0,r._)("td",b,"$ "+(0,o.zw)(e.$filters.currency(e.subTotal))+" NTD",1)]),e.isUseCoupon?((0,r.wg)(),(0,r.iD)("tr",f,[(0,r._)("td",w,"已套用優惠卷 '"+(0,o.zw)(e.couponCode)+"'",1),(0,r._)("td",k,(0,o.zw)(e.couponPercent/10)+" 折",1)])):(0,r.kq)("",!0),e.order.total!==e.subTotal?((0,r.wg)(),(0,r.iD)("tr",N,[x,(0,r._)("td",I,"$"+(0,o.zw)(e.$filters.currency(e.order.total))+" NTD",1)])):(0,r.kq)("",!0),e.order.total>0&&e.order.total<2e3?((0,r.wg)(),(0,r.iD)("tr",P,[M,(0,r._)("td",E,"$"+(0,o.zw)(e.shippingFee)+" NTD",1)])):(0,r.kq)("",!0),e.order.total>=2e3?((0,r.wg)(),(0,r.iD)("tr",L,D)):(0,r.kq)("",!0)]),(0,r._)("tfoot",q,[(0,r._)("tr",null,[z,e.order.total>=2e3?((0,r.wg)(),(0,r.iD)("td",$," $"+(0,o.zw)(e.$filters.currency(e.order.total))+" NTD ",1)):(0,r.kq)("",!0),e.order.total<2e3?((0,r.wg)(),(0,r.iD)("td",S," $"+(0,o.zw)(e.$filters.currency(e.order.total+e.shippingFee))+" NTD ",1)):(0,r.kq)("",!0)])])])])])]),(0,r._)("div",T,[(0,r._)("div",A,[(0,r._)("div",O,[U,(0,r._)("table",Y,[(0,r._)("tbody",null,[(0,r._)("tr",null,[(0,r._)("td",null,[W,(0,r._)("p",F,(0,o.zw)(e.order.id),1)])]),(0,r._)("tr",null,[(0,r._)("td",null,[B,(0,r._)("p",j,(0,o.zw)(e.order.user.email),1)])]),(0,r._)("tr",null,[(0,r._)("td",null,[H,(0,r._)("p",Q,(0,o.zw)(e.order.user.name),1)])]),(0,r._)("tr",null,[(0,r._)("td",null,[K,(0,r._)("p",J,(0,o.zw)(e.order.user.tel),1)])]),(0,r._)("tr",null,[(0,r._)("td",null,[G,(0,r._)("p",R,(0,o.zw)(e.order.user.address),1)])]),(0,r._)("tr",null,[(0,r._)("td",null,[X,e.order.is_paid?((0,r.wg)(),(0,r.iD)("p",te,"已付款")):((0,r.wg)(),(0,r.iD)("p",ee,"尚未付款"))])])])])])]),e.order.is_paid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",se,[(0,r._)("div",re,[(0,r.Wm)(le)])]))])])],32)])],64)}var oe=s(9876),ce=s(646),le=s(4677),ie=s(6294),ne=s(7012),de=s(1629);const ue={class:"mb-3"},pe=(0,r._)("h5",{class:"text-center mb-3"},"付款方式",-1),he={class:"form-check form-check-inline"},me=(0,r._)("label",{class:"form-check-label",for:"credit"},"信用卡付款",-1),ge={class:"form-check form-check-inline"},_e=(0,r._)("label",{class:"form-check-label",for:"atm"},"ATM轉帳付款",-1),ve={class:"mb-3"},ye=(0,r._)("label",{class:"form-label",for:"cardNumber"},"信用卡號碼",-1),Ce={key:0,class:"text-danger",style:{"font-size":"14px"}},be={class:"mb-3"},fe=(0,r._)("label",{class:"form-label",for:"cardName"},"信用卡姓名",-1),we={class:"row mb-3"},ke={class:"col-9"},Ne=(0,r._)("label",{for:"cardMonth",class:"form-label"},"信用卡到期月/年",-1),xe={class:"row"},Ie={class:"col-6"},Pe=(0,r._)("option",{value:"",disabled:"",selected:""},"MM",-1),Me=["value"],Ee={class:"col-6"},Le=(0,r._)("option",{value:"",disabled:"",selected:""},"YY",-1),Ze=["value"],Ve={class:"col-3"},De=(0,r._)("label",{for:"cardCvv",class:"form-label"},"CVV",-1),qe={key:0,class:"text-danger",style:{"font-size":"14px"}},ze=(0,r._)("div",{class:"mb-3"},[(0,r._)("button",{type:"submit",class:"btn btn-warning w-100"},"確認付款")],-1),$e=(0,r._)("div",{class:"mb-3"},[(0,r._)("p",null,"請匯款到以下帳號"),(0,r._)("strong",null,"您在匯款後，請告知我們匯款帳號末五碼")],-1),Se=(0,r._)("table",{class:"table"},[(0,r._)("tbody",null,[(0,r._)("tr",null,[(0,r._)("th",null,"銀行代號"),(0,r._)("td",null,"123")]),(0,r._)("tr",null,[(0,r._)("th",null,"銀行"),(0,r._)("td",null,"Good Bank 銀行")]),(0,r._)("tr",null,[(0,r._)("th",null,"分行"),(0,r._)("td",null,"台北分行")]),(0,r._)("tr",null,[(0,r._)("th",null,"銀行帳號"),(0,r._)("td",null,"987 654321234")])])],-1),Te={class:"mb-3"},Ae=(0,r._)("label",{for:"paymentAcc",class:"form-label"},"匯款帳號末五碼",-1),Oe={key:0,class:"text-danger",style:{"font-size":"14px"}},Ue=(0,r._)("div",{class:"mb-3"},[(0,r._)("button",{class:"btn btn-warning w-100"},"通知已匯款")],-1);function Ye(e,t,s,a,c,l){const i=(0,r.up)("LoadingOverlay"),n=(0,r.up)("Field"),d=(0,r.up)("ErrorMessage"),u=(0,r.up)("Form");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{active:e.isLoading},null,8,["active"]),(0,r._)("div",ue,[pe,(0,r._)("div",he,[(0,r._)("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"credit",value:"credit",onChange:t[0]||(t[0]=e=>l.paymentMethod(e))},null,32),me]),(0,r._)("div",ge,[(0,r._)("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"atm",value:"atm",onChange:t[1]||(t[1]=e=>l.paymentMethod(e))},null,32),_e])]),"credit"===c.payment?((0,r.wg)(),(0,r.j4)(u,{key:0,onSubmit:l.checkPayment},{default:(0,r.w5)((({errors:s})=>[(0,r._)("div",ve,[ye,(0,r.Wm)(n,{class:(0,o.C_)(["form-control",{"is-invalid":s["信用卡號碼"]}]),type:"text",id:"cardNumber",name:"信用卡號碼",maxlength:"19",minlength:"19",autocomplete:"off",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",onBlur:t[2]||(t[2]=t=>e.checkCreditNum(c.customerCardInfo.realCardNumber.length)),onFocus:e.clearErrorMessage,modelValue:c.cardNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>c.cardNumber=e),placeholder:"0000 0000 0000 0000",rules:"required"},null,8,["onFocus","modelValue","class"]),(0,r.Wm)(d,{name:"信用卡號碼",class:"invalid-feedback"}),e.creditNumError?((0,r.wg)(),(0,r.iD)("span",Ce,"信用卡卡號有誤！")):(0,r.kq)("",!0)]),(0,r._)("div",be,[fe,(0,r.Wm)(n,{class:(0,o.C_)(["form-control",{"is-invalid":s["信用卡姓名"]}]),type:"text",id:"cardName",autocomplete:"off",name:"信用卡姓名",modelValue:c.customerCardInfo.cardName,"onUpdate:modelValue":t[4]||(t[4]=e=>c.customerCardInfo.cardName=e),rules:"required"},null,8,["modelValue","class"]),(0,r.Wm)(d,{name:"信用卡姓名",class:"invalid-feedback"})]),(0,r._)("div",we,[(0,r._)("div",ke,[Ne,(0,r._)("div",xe,[(0,r._)("div",Ie,[(0,r.Wm)(n,{name:"到期月份",as:"select",id:"cardMonth",class:(0,o.C_)(["form-select me-3",{"is-invalid":s["到期月份"]}]),modelValue:c.customerCardInfo.cardMonth,"onUpdate:modelValue":t[5]||(t[5]=e=>c.customerCardInfo.cardMonth=e),rules:"required"},{default:(0,r.w5)((()=>[Pe,((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(12,(e=>(0,r._)("option",{value:e<10?"0"+e:e,key:e},(0,o.zw)(e<10?"0"+e:e),9,Me))),64))])),_:2},1032,["modelValue","class"]),(0,r.Wm)(d,{name:"到期月份",class:"invalid-feedback"})]),(0,r._)("div",Ee,[(0,r.Wm)(n,{name:"到期年份",as:"select",id:"cardYear",class:(0,o.C_)(["form-select",{"is-invalid":s["到期年份"]}]),modelValue:c.customerCardInfo.cardYear,"onUpdate:modelValue":t[6]||(t[6]=e=>c.customerCardInfo.cardYear=e),rules:"required"},{default:(0,r.w5)((()=>[Le,((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(12,((e,t)=>(0,r._)("option",{value:t+c.minCardYear,key:e},(0,o.zw)(t+c.minCardYear),9,Ze))),64))])),_:2},1032,["modelValue","class"]),(0,r.Wm)(d,{name:"到期年份",class:"invalid-feedback"})])])]),(0,r._)("div",Ve,[De,(0,r.Wm)(n,{type:"text",name:"CVV號碼",id:"cardCvv",class:(0,o.C_)(["form-control",{"is-invalid":s["CVV號碼"]}]),maxlength:"3",minlength:"3",modelValue:c.customerCardInfo.cardCvv,"onUpdate:modelValue":t[7]||(t[7]=e=>c.customerCardInfo.cardCvv=e),placeholder:"000",onBlur:t[8]||(t[8]=t=>e.checkCvvNum(c.customerCardInfo.cardCvv.length)),onFocus:t[9]||(t[9]=t=>e.clearErrorMessage()),oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",rules:"required"},null,8,["modelValue","class"]),(0,r.Wm)(d,{name:"CVV號碼",class:"invalid-feedback"}),e.cvvNumError?((0,r.wg)(),(0,r.iD)("span",qe,"CVV號碼有誤！")):(0,r.kq)("",!0)])]),ze])),_:1},8,["onSubmit"])):(0,r.kq)("",!0),"atm"===c.payment?((0,r.wg)(),(0,r.j4)(u,{key:1,onSubmit:l.checkPayment},{default:(0,r.w5)((({errors:s})=>[$e,Se,(0,r._)("div",Te,[Ae,(0,r.Wm)(n,{type:"text",name:"帳號末五碼",class:(0,o.C_)(["form-control",{"is-invalid":s["帳號末五碼"]}]),id:"paymentAcc",placeholder:"00000",maxlength:"5",modelValue:c.customerAccInfo.paymentAcc,"onUpdate:modelValue":t[10]||(t[10]=e=>c.customerAccInfo.paymentAcc=e),onBlur:t[11]||(t[11]=t=>e.checkAccNum(c.customerAccInfo.paymentAcc.length)),onFocus:e.clearErrorMessage,autocomplete:"off",oninput:"this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",rules:"required"},null,8,["modelValue","onFocus","class"]),(0,r.Wm)(d,{name:"帳號末五碼",class:"invalid-feedback"}),e.accNumError?((0,r.wg)(),(0,r.iD)("span",Oe,"帳號號碼有誤！")):(0,r.kq)("",!0)]),Ue])),_:1},8,["onSubmit"])):(0,r.kq)("",!0)],64)}var We={computed:{...(0,oe.rn)(ce.Z,["order","orderIsPaid","creditNumError","cvvNumError","accNumError"]),...(0,oe.rn)(ie.Z,["isLoading"])},data(){return{payment:"",cardNumber:"",customerCardInfo:{realCardNumber:"",cardName:"",cardMonth:"",cardYear:"",cardCvv:""},customerAccInfo:{paymentAcc:""},minCardYear:(new Date).getFullYear()}},watch:{cardNumber(){this.customerCardInfo.realCardNumber=this.cardNumber.replace(/ /gi,"");const e=this.customerCardInfo.realCardNumber.match(/.{1,4}/g);""!==this.customerCardInfo.realCardNumber&&e!==[]&&(this.cardNumber=e.join(" "))}},methods:{...(0,oe.nv)(ce.Z,["payOrder","checkCreditNum","checkCvvNum","checkAccNum","clearErrorMessage"]),checkPayment(){"credit"===this.payment?(this.checkCreditNum(this.customerCardInfo.realCardNumber.length),this.checkCvvNum(this.customerCardInfo.cardCvv.length),!1===this.creditNumError&&!1===this.cvvNumError&&this.payOrder()):"atm"===this.payment&&(this.checkAccNum(this.customerAccInfo.paymentAcc.length),!1===this.accNumError&&this.payOrder())},paymentMethod(e){const t=e.target.value;this.payment=t}}},Fe=s(3744);const Be=(0,Fe.Z)(We,[["render",Ye]]);var je=Be,He={components:{CartProgressBar:de.Z,Payment:je},computed:{...(0,oe.rn)(ce.Z,["order","shippingFee","isUseCoupon","couponCode","couponPercent","subTotal","orderIsPaid"]),...(0,oe.rn)(ie.Z,["isLoading"])},data(){return{progressBar:3}},methods:{...(0,oe.nv)(ce.Z,["getOrder"]),...(0,oe.nv)(le.Z,["getCart"]),...(0,oe.nv)(ne.Z,["scrollToTop"]),isPaid(){this.order.is_paid&&(this.progressBar=4)}},async created(){const{orderId:e}=this.$route.params;await this.getOrder(e),this.getCart(),this.isPaid(),this.scrollToTop()}};const Qe=(0,Fe.Z)(He,[["render",ae]]);var Ke=Qe}}]);
//# sourceMappingURL=433.5f8b2e16.js.map